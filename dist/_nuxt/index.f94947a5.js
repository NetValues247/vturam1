import{_ as P}from"./WelcomeBaseAdmin.fbfac59b.js";import{q as z,e as V,r,D as W,f as $,a as d,h as v,b as e,c as k,u as t,E as h,j as u,T as M,F,B as E,C as G,o as a,l as m,t as o,i as I,v as R,k as b,G as U}from"./entry.bfccc7c4.js";import{_ as q}from"./ModalBase.f1cd9c23.js";import{c as B}from"./useStrings.92ef0abb.js";import{g as H}from"./getters.f87781ea.js";import"./vend.90322b11.js";const L={class:"rounded-md bg-white pb-10"},O={class:"pt-10"},J=e("p",{class:"text-lg font-semibold text-center mt-3"},"Confirm Bank Details",-1),K={key:0,class:"p-3 bg-slate-300/[.35] rounded-md"},Q=e("p",{class:"font-bold"},"Amount will be sent to this Account.",-1),X={class:"flex flex-nowrap justify-between mt-3"},Y=e("p",{class:"w-1/2 text-lg font-medium"},"Account Number:",-1),Z={class:"w-1/2 font-bold text-left"},ee={class:"flex flex-nowrap justify-between"},te=e("p",{class:"w-1/2 text-lg font-medium"},"Account Bank :",-1),se={class:"w-1/2 font-bold text-left"},oe={class:"flex flex-nowrap justify-between"},le=e("p",{class:"w-1/2 text-lg font-medium"},"Account Name:",-1),ae={class:"w-1/2 font-bold text-left"},ne={key:1,class:"mt-3"},de={class:"text-lg"},ie=e("p",{class:"font-semibold text-lg mt-5"},"Amount to Withdrawal :",-1),re=["max"],ce={key:0},me={key:1},ue=["disabled"],pe={key:0,class:"animate-spin h-7 w-7 -mb-2 mr-3 pt-2 border-r border-b border-l-2 border-white rounded-full inline-block"},_e={class:"overflow-x-auto bg-slate-300/[.4] mt-10"},fe=G('<div class="flex flex-nowrap gap-4 justify-start lg:justify-around w-[800px] lg:w-full bg-slate-600/[.4] p-3 rounded-sm mb-4"><p class="text-sm w-[5%]">S/N</p><p class="text-sm w-[30%] mr-2 font-semibold">User</p><p class="text-sm w-[30%] mr-2 font-semibold">Recipient</p><p class="text-sm w-[30%] mr-2 font-semibold">Transaction type</p><p class="text-sm w-[30%] mr-2 font-semibold">Transaction Ref</p><p class="text-sm w-[30%] mr-2 font-semibold">Amount</p><p class="text-sm w-[30%] mr-2 font-semibold">Profit</p><p class="text-sm w-[30%] mr-2 font-semibold">Date</p><p class="w-[30%] font-semibold">Status</p></div>',1),be={key:0,class:"flex flex-nowrap justify-start lg:justify-around w-[800px] lg:w-full bg-slate-100 gap-4 mt-3 rounded-sm p-3"},we=e("p",null,"No Transactions",-1),xe=[we],he={key:1},ge={class:"text-sm w-[5%] font-semibold"},ye={class:"text-sm w-[30%] mr-2 overflow-x-auto font-semibold"},ve={class:"text-sm w-[30%] mr-2 overflow-x-auto font-semibold"},ke={class:"text-sm w-[30%] mr-2 break-words font-semibold"},Be={class:"text-sm w-[30%] mr-2 font-semibold"},Ae={class:"text-sm w-[30%] mr-2 font-semibold text-green-600"},Ne=e("span",null,"+",-1),De={class:"text-sm w-[30%] mr-2 font-semibold"},je={class:"w-[30%]"},$e={__name:"index",async setup(Te){let p,g;const A=z(),l=V();H();const w=r(!1);let _=r(!1),i=r({});r(!1),l.getProiftAnalysis();let x=r({});r("sms"),r("bg-white rounded-lg px-10");try{const n=([p,g]=W(()=>l.getTransactionAnalysis()),p=await p,g(),p);x.value=n.data}catch(n){console.log(n)}const c=r({amount:0,details:{userId:l.details.track_id,recipient_code:l.details.recipient_code}});function N(){l.$patch({modalshowing:!1}),w.value=!1}const y=$(()=>l.analysis.withdrawableBalance>c.value.amount),D=async()=>{_.value=!0;try{await A.withdrawFunds(c.value).then(n=>{_.value=!1,i.value=n,c.value.amount=0,l.getTransactionAnalysis(),setTimeout(()=>{l.getSiteDetails()},3e3)})}catch(n){_.value=!1,i.value=n}};return(n,f)=>{const j=P,T=U,C=q;return a(),d("div",null,[v(j),e("div",L,[e("div",O,[e("button",{onClick:f[0]||(f[0]=s=>w.value=!0),class:"p-3 rounded-md block border w-full lg:w-1/2 border-[#0f8B8D] text-[#0f8B8D] font-bold text-md hover:text-[#50b8ba] hover:border-[#50b8ba] lg:text-lg mx-auto"},"Withdraw Profit")]),(a(),k(M,{to:"body"},[t(w)?(a(),k(C,{key:0,onHideModal:N},{title:h(()=>[m("Withdraw your Earnings")]),body:h(()=>[J,t(l).details.recipient_code.length>0?(a(),d("div",K,[Q,e("div",X,[Y,e("p",Z,o(t(l).details.account_number),1)]),e("div",ee,[te,e("p",se,o(t(l).details.account_bank),1)]),e("div",oe,[le,e("p",ae,o(t(l).details.account_name),1)])])):(a(),d("div",ne,[e("p",de,[m("Account Details is Incomplete. Please go to "),v(T,{class:"text-blue-600 text-bold",to:{name:"admin-settings-bankdetails"}},{default:h(()=>[m("your Profile")]),_:1}),m(" to update your account details before Withdrawal.")])])),ie,I(e("input",{type:"number","onUpdate:modelValue":f[1]||(f[1]=s=>t(c).amount=s),min:"0",max:t(l).analysis.withdrawableBalance,class:"p-3 mt-2 rounded-lg border border-gray-400 w-full",placeholder:"3000"},null,8,re),[[R,t(c).amount]]),t(i)?(a(),d("div",{key:2,class:b(["rounded-md p-3 mt-3",{"text-red-600 bg-red-600/[.2]":t(i).status==!1,"text-green-600 bg-green-600/[.2]":t(i).status==!0}])},[t(i).status==!1?(a(),d("p",ce,o(t(i).message)+".",1)):u("",!0),t(i).status==!0?(a(),d("p",me,o(t(i).message),1)):u("",!0)],2)):u("",!0),e("button",{disabled:t(c).amount<=0||t(l).details.recipient_code.length<=0||!t(y),class:b([{"bg-[#0f8b8d89] hover:bg-[#0f8b8d89]":t(c).amount<=0||t(l).details.recipient_code.length<=0||!t(y)},"block w-full p-3 rounded-sm mt-3 font-semibold text-lg bg-[#0f8B8D] text-white hover:bg-[#13696a]"]),onClick:D},[t(_)?(a(),d("span",pe)):u("",!0),m(" Withdraw Profit")],10,ue)]),_:1})):u("",!0)])),e("div",_e,[fe,t(x).length==0?(a(),d("div",be,xe)):(a(),d("div",he,[(a(!0),d(F,null,E(t(x),(s,S)=>(a(),d("div",{key:s.id,class:"flex flex-nowrap justify-start lg:justify-around w-[800px] lg:w-full bg-slate-100 gap-4 mt-3 rounded-sm p-3"},[e("p",ge,o(S+1),1),e("p",ye,o(s.userDetails[0].last_name)+" "+o(s.userDetails[0].first_name),1),e("p",ve,o(s.recipient),1),e("p",ke,o(("capitalize"in n?n.capitalize:t(B))(s.transaction_type)),1),e("p",Be,o(s.reference),1),e("p",{class:b(["text-sm w-[30%] mr-2 font-semibold",{"text-red-600":s.category=="debit","text-green-600":s.category=="credit"}])},[e("span",null,o(s.category=="debit"?"-":"+"),1),m(o(s.currency=="NGN"?"₦":"$")+o(s.amount),1)],2),e("p",Ae,[Ne,m(o(s.currency=="NGN"?"₦":"$")+o(s.profit),1)]),e("p",De,o(s.trnx_date),1),e("p",je,[e("span",{class:b(["rounded-full text-center h-fit p-1 px-3 text-sm",{"bg-yellow-500/[.2] text-yellow-500":s.status=="pending"||s.status=="Pending","bg-red-600/[.2] text-red-600":s.status=="error","bg-green-600/[.2] text-green-600":s.status=="completed"||s.status=="Completed"||s.status=="success"}])},o(("capitalize"in n?n.capitalize:t(B))(s.status)),3)])]))),128))]))])])])}}};export{$e as default};
